# バージョン管理ガイド / Version Management Guide

このドキュメントでは、プロジェクトのバージョン管理方法について説明します。

## 📋 目次

1. [セマンティックバージョニングについて](#セマンティックバージョニングについて)
2. [バージョンの更新方法](#バージョンの更新方法)
3. [変更ログの記録](#変更ログの記録)
4. [リリースワークフロー](#リリースワークフロー)

---

## 🔢 セマンティックバージョニングについて

このプロジェクトは[セマンティックバージョニング（Semantic Versioning 2.0.0）](https://semver.org/)を採用しています。

### バージョン形式

```
MAJOR.MINOR.PATCH
```

- **MAJOR（メジャー）**: 互換性のない大きな変更
- **MINOR（マイナー）**: 後方互換性のある機能追加
- **PATCH（パッチ）**: 後方互換性のあるバグ修正

### 開発段階（0.x.x）のルール

現在は開発段階のため、`0.x.x`形式を使用しています：

- **0.MINOR.PATCH** 形式
- `0.1.0` から開始
- いつでも破壊的変更が発生する可能性があります
- **MINOR**: 新機能追加または大きな変更
- **PATCH**: バグ修正または小さな変更
- 安定版リリース時に `1.0.0` に移行予定

### 例

- `0.1.0` → `0.2.0`: 新機能追加（Firestore統合）
- `0.2.0` → `0.2.1`: バグ修正
- `0.2.1` → `0.3.0`: 新機能追加（再帰的お気に入り）
- `0.x.x` → `1.0.0`: 安定版リリース

---

## 🔄 バージョンの更新方法

### 1. バージョン番号の決定

以下の基準でバージョン番号を決定します：

| 変更内容 | バージョン更新 | 例 |
|---------|--------------|-----|
| 新機能追加 | MINOR を +1 | 0.2.0 → 0.3.0 |
| バグ修正 | PATCH を +1 | 0.2.0 → 0.2.1 |
| 大規模リファクタリング | MINOR を +1 | 0.2.0 → 0.3.0 |
| ドキュメント更新のみ | 変更なし | 0.2.0 → 0.2.0 |
| 安定版リリース | MAJOR を 1に | 0.9.0 → 1.0.0 |

### 2. 更新が必要なファイル

バージョンを更新する際は、以下のファイルを更新します：

#### ✅ 必須ファイル

1. **`package.json`**
   ```json
   {
     "version": "0.3.0"
   }
   ```

2. **`VERSION.md`**
   - 新しいバージョンセクションを追加
   - リリース日、変更内容を記載

3. **`src/version-config.ts`**
   ```typescript
   export const VERSION_INFO = {
     APP_VERSION: '0.3.0',
     VERSION_NAME: 'Alpha Release - Feature Name',
     RELEASE_DATE: '2025-11-02',
     BUILD_NUMBER: 3, // インクリメント
   };
   ```

4. **`README.md`**
   ```markdown
   [![Version](https://img.shields.io/badge/version-0.3.0-blue.svg)](./VERSION.md)
   ```

#### 📝 オプション（主要ファイルのみ）

5. **各コンポーネント/フックファイルの@versionタグ**（主要ファイルのみ）
   ```typescript
   /**
    * @version 0.3.0
    * @updated 2025-11-02
    */
   ```

### 3. 更新手順

```bash
# 1. 新しいブランチを作成
git checkout -b release/v0.3.0

# 2. バージョン番号を更新
# - package.json
# - VERSION.md
# - src/version-config.ts
# - README.md
# - 主要ファイルの@versionタグ

# 3. 変更をコミット
git add .
git commit -m "chore: bump version to 0.3.0"

# 4. タグを作成
git tag -a v0.3.0 -m "Release version 0.3.0"

# 5. プッシュ
git push origin release/v0.3.0
git push origin v0.3.0

# 6. プルリクエスト作成
# GitHubでmainブランチへのPRを作成
```

---

## 📝 変更ログの記録

### VERSION.mdの記載形式

```markdown
### [0.3.0] - 2025-11-02

#### 🎉 Added（追加機能）
- 機能の説明
- 詳細な実装内容

#### 🐛 Fixed（バグ修正）
- 修正した問題の説明
- 具体的な変更内容

#### 🔧 Changed（変更）
- 変更した機能の説明

#### ❌ Removed（削除）
- 削除した機能の説明

#### 🔒 Security（セキュリティ）
- セキュリティ関連の修正

#### 📝 Documentation（ドキュメント）
- ドキュメントの追加・更新
```

### カテゴリの使い分け

| カテゴリ | 使用例 |
|---------|--------|
| **Added** | 新機能、新しいコンポーネント、新しいAPI |
| **Changed** | 既存機能の変更、UIの改善 |
| **Deprecated** | 非推奨となる機能（将来削除予定） |
| **Removed** | 削除された機能、コンポーネント |
| **Fixed** | バグ修正、エラー対応 |
| **Security** | セキュリティ関連の修正 |
| **Documentation** | READMEやドキュメントの更新 |

---

## 🚀 リリースワークフロー

### 開発段階（0.x.x）のリリースフロー

```
1. 機能開発
   ├── feature/xxxブランチで開発
   └── developブランチへマージ

2. リリース準備
   ├── release/v0.x.0ブランチ作成
   ├── バージョン番号更新
   ├── VERSION.md更新
   └── テスト実施

3. リリース
   ├── mainブランチへマージ
   ├── Gitタグ作成（v0.x.0）
   └── GitHub Releaseを作成

4. デプロイ
   ├── Firebase Hostingへデプロイ
   └── 動作確認
```

### 安定版（1.0.0）リリースの判断基準

以下の条件を満たした場合に `1.0.0` へ移行します：

- ✅ すべての主要機能が実装済み
- ✅ 十分なテスト実施（ユニット・統合テスト）
- ✅ ユーザーフィードバックの反映完了
- ✅ パフォーマンス最適化完了
- ✅ セキュリティ監査完了
- ✅ ドキュメント完備
- ✅ 本番環境での安定稼働を確認

---

## 🔗 関連リンク

- [VERSION.md](../VERSION.md) - バージョン履歴の詳細
- [DEVELOPMENT_LOG.md](./DEVELOPMENT_LOG.md) - 開発ログ
- [FEATURE_ROADMAP.md](./FEATURE_ROADMAP.md) - 機能ロードマップ
- [Semantic Versioning 2.0.0](https://semver.org/) - 公式仕様

---

**最終更新**: 2025-11-02  
**作成者**: Yusei Maekawa
